query create_payment_plan($payment_limitations: [InputPaymentOptionState!]!, $delivery_address_id: String, $client_event: ClientEvent, $capabilities: Capabilities, $params: [InputParam!], $checkout_id: String) { payment_plan: create_payment_plan( payment_limitations: $payment_limitations delivery_address_id: $delivery_address_id client_event: $client_event capabilities: $capabilities params: $params checkout_id: $checkout_id ) { __typename id delivery_addresses { __typename ...DeliveryAddressesFragment } payment_options { __typename completing { __typename ...CompletingPaymentOptionFragment } selected_completing { __typename ...CompletingPaymentOptionFragment } apple_pay_config { __typename tokenizer api_key } } hide_fulfillment_details_section fulfillment_details { __typename eta { __typename title description } restaurant fulfillment_type in_person_fulfillment_address { __typename address1 city post_code phone distance_presentational coordinates { __typename latitude longitude } } } line_item_groups(filter_by_type: [TOTAL]) { __typename group_type line_items { __typename title cost } } execution_state { __typename execution_cta is_executable banner { __typename ...UiBanner } show_add_payment_method_cta } footer_note marketing_preferences { __typename id content selected type } blocks { __typename ...UiSectionFragment } tracking_data { __typename currency_code } } }
fragment ColorFragment on Color { __typename red green blue alpha }
fragment CompletingPaymentOptionFragment on CompletingPaymentOption { __typename id title description proposed_amount { __typename currency_code formatted fractional numerical } is_selectable icon_url payment_type variants { __typename title selected { __typename name id } variants { __typename name id } } }
fragment DeliveryAddressFragment on DeliveryAddress { __typename id short_description long_description location { __typename latitude longitude } title delivery_note phone_number map_options { __typename pin_icon } }
fragment DeliveryAddressesFragment on DeliveryAddresses { __typename available { __typename ...DeliveryAddressFragment } selected { __typename ...DeliveryAddressFragment } add_new_address_cta gift { __typename ...UiCheckboxFragment } warning_message { __typename ...UiLineFragment } distance_threshold_warning_message { __typename ...UiLineFragment } }
fragment PaymentBreakdownRowFragment on PaymentBreakdownRow { __typename label { __typename ...UiLineFragment } cost { __typename ...UiLineFragment } }
fragment UIAddVoucherFragment on UIAddVoucher { __typename key cta }
fragment UiAllowanceSelectionScreen on UIAllowanceSelectionScreen { __typename key screen_title ui_lines { __typename ...UiLineFragment } cta_text programs { __typename ...UiProgramRadioGroup } has_close_icon }
fragment UiAttributedStringFragment on UIAttributedString { __typename color { __typename ...UiColorFragment } content prepend_icon }
fragment UiBanner on UIBanner { __typename cta title description ui_lines { __typename ...UiLineFragment } }
fragment UiBannerFeaturedPaymentMethodFragment on UIBannerFeaturedPaymentMethod { __typename ui_lines { __typename ...UiLineFragment } background_image { __typename ...UiImageFragment } background_color { __typename ...ColorFragment } methods_screen { __typename ...UiBannerPickPaymentMethodsScreenFragment } featured_payment_methods_icons { __typename ...UiImageFragment } }
fragment UiBannerPickPaymentMethodFragment on UIBannerPickPaymentMethod { __typename ui_lines { __typename ...UiLineFragment } background_image { __typename ...UiImageFragment } background_color { __typename ...ColorFragment } cta methods_screen { __typename ...UiBannerPickPaymentMethodsScreenFragment } }
fragment UiBannerPickPaymentMethodsScreenFragment on UIBannerPickPaymentMethodsScreen { __typename title cta cancel_cta blocks { __typename ...UiPaymentMethodFragment } }
fragment UiBlockFragment on UIBlock { __typename ... on UICheckbox { ...UiCheckboxFragment } ... on UILoyaltyCard { ...UiLoyaltyCardFragment } ... on UIBannerPickPaymentMethod { ...UiBannerPickPaymentMethodFragment } ... on UIBannerFeaturedPaymentMethod { ...UiBannerFeaturedPaymentMethodFragment } ... on UISelectedPaymentMethod { ...UiSelectedPaymentMethodFragment } ... on UISelectedPaymentMethodCredit { ...UiSelectedPaymentMethodCreditFragment } ... on UIPaymentBreakdown { ...UiPaymentBreakdown } ... on UIMealCardPresentToggle { ...UiMealCardPresentToggleFragment } ... on UIMealCardAbsentToggle { ...UiMealCardAbsentToggleFragment } ... on UIFundBalance { ...UiFundBalanceFragment } ... on UICorporateAllowance { ...UiCorporateAllowanceFragment } ... on UIVouchers { ...UiVouchersFragment } ... on UIUnusableVouchers { ...UiUnusableVouchersFragment } ... on UIContentRow { ...UiContentRowFragment } ... on UIUndoWindowBlock { ...UiUndoWindowBlock } ... on UIUndoWindowOrderItemBlock { ...UiUndoWindowOrderItemBlock } ... on UIUndoWindowPaymentBlock { ...UiUndoWindowPaymentBlock } }
fragment UiCTALinkFragment on UICTALink { __typename key text modal { __typename ...UiModalFragment } event_tracking { __typename ...UiEventTrackingFragment } }
fragment UiChangePaymentMethodScreenFragment on UIChangePaymentMethodScreen { __typename ui_lines { __typename ...UiLineFragment } cta cancel_cta try_another_way_to_pay_cta methods_screen { __typename ...UiBannerPickPaymentMethodsScreenFragment } blocks { __typename ...UiPaymentTokenOptionFragment } }
fragment UiCheckboxFragment on UICheckbox { __typename key id default required submission { __typename ...UiSubmissionFragment } event_tracking { __typename ...UiEventTrackingFragment } label { __typename ...UiAttributedStringFragment } optional_lines: ui_lines { __typename ...UiLineFragment } invalid_state { __typename event_tracking { __typename ...UiEventTrackingFragment } description { __typename ...UiAttributedStringFragment } } }
fragment UiCheckboxInvalidStateFragment on UICheckboxInvalidState { __typename ui_lines { __typename ...UiLineFragment } event_tracking { __typename ...UiEventTrackingFragment } }
fragment UiColorFragment on UIColorRGBA { __typename red green blue alpha }
fragment UiContentRowFragment on UIContentRow { __typename key left { __typename ...UiImageFragment } main { __typename ...UiLineFragment } right { __typename ...UiLineFragment } }
fragment UiCorporateAllowanceFragment on UICorporateAllowance { __typename key id ui_lines { __typename ...UiLineFragment } is_selected is_selectable selected_allowance { __typename ...UiSelectedAllowance } allowance_selection_screen { __typename ...UiAllowanceSelectionScreen } }
fragment UiEventTrackingFragment on EventTracking { __typename event_name default_properties { __typename name value } }
fragment UiFundBalanceFragment on UIFundBalance { __typename key id ui_lines { __typename ...UiLineFragment } icon { __typename ...UiImageFragment } is_selected is_selectable dialog { __typename ...UiInputDialogFragment } }
fragment UiImageFragment on UIImage { __typename url title }
fragment UiInputDialogFragment on UIInputDialog { __typename cta cancel_cta title { __typename ...UiLineFragment } textbox { __typename ...UiTextboxFragment } }
fragment UiLineFragment on UILine { __typename ... on UITextLine { ui_spans { __typename ... on UISpanIcon { ...UiSpanIconFields } ... on UISpanText { color { __typename ...ColorFragment } is_bold is_strikethrough text_size: size text } ... on UISpanSpacer { width } } } ... on UITitleLine { text color { __typename ...ColorFragment } size } }
fragment UiLoyaltyCardFragment on UILoyaltyCard { __typename key ui_lines { __typename ...UiLineFragment } text_box { __typename ...UiTextboxFragment } cta header_image { __typename url } submit_path }
fragment UiMealCardAbsentToggleFragment on UIMealCardAbsentToggle { __typename key banner { __typename ...UiBanner } meal_card_toggle { __typename ...UiToggleFragment } methods_screen { __typename ...UiBannerPickPaymentMethodsScreenFragment } }
fragment UiMealCardPresentToggleFragment on UIMealCardPresentToggle { __typename key meal_card_toggle { __typename ...UiToggleFragment } banner { __typename ...UiBanner } meal_card { __typename ...UiPaymentTokenOptionWithoutVariantsFragment } footer_cta_link { __typename ...UiCTALinkFragment } }
fragment UiModalBodyContentFragment on UIModalBodyContent { __typename sections { __typename ...UiModalBodyContentSectionFragment } }
fragment UiModalBodyContentSectionFragment on UIModalBodyContentSection { __typename ... on UIContentRow { ...UiContentRowFragment } }
fragment UiModalBodyFragment on UIModalBody { __typename ... on UIModalBodyContent { ...UiModalBodyContentFragment } ... on UIModalBodyText { ...UiModalBodyTextFragment } }
fragment UiModalBodyTextFragment on UIModalBodyText { __typename ui_attributed_lines { __typename ...UiAttributedStringFragment } }
fragment UiModalFragment on UIModal { __typename title has_close_icon cta body { __typename ...UiModalBodyFragment } }
fragment UiPaymentBreakdown on UIPaymentBreakdown { __typename key ui_lines { __typename ...UiLineFragment } rows { __typename ...PaymentBreakdownRowFragment } }
fragment UiPaymentMethodFragment on UIPaymentMethod { __typename ... on UINewCard { cta cancel_cta title tokenizer api_key ui_lines { __typename ...UiLineFragment } form_description { __typename ...UiAttributedStringFragment } store_option_opt_in_out { __typename selected label show_opt_in } icon_url card_icons { __typename ...UiImageFragment } postcode { __typename label } } ... on UIAuthRedirectPaymentMethod { action_url ui_lines { __typename ...UiLineFragment } icon_url title action_target } ... on UISelectablePaymentOption { id is_selectable ui_lines { __typename ...UiLineFragment } icon_url title } ... on UISelectablePaymentOptionWithVariants { id is_selectable ui_lines { __typename ...UiLineFragment } icon_url title variants_screen { __typename title cancel_cta blocks { __typename name ui_lines { __typename ...UiLineFragment } } } } ... on UIPaypalPaymentMethod { title ui_lines { __typename ...UiLineFragment } icon_url api_key } ... on UIMobileWalletPaymentMethod { id title ui_lines { __typename ...UiLineFragment } icon_url tokenizer api_key } }
fragment UiPaymentTokenOptionFragment on UIPaymentTokenOption { __typename ... on UIPaymentTokenOptionWithoutVariants { ...UiPaymentTokenOptionWithoutVariantsFragment } }
fragment UiPaymentTokenOptionWithoutVariantsFragment on UIPaymentTokenOptionWithoutVariants { __typename id title ui_lines { __typename ...UiLineFragment } icon { __typename ...UiImageFragment } is_selectable is_selected }
fragment UiProgramRadioGroup on UIProgramRadioGroup { __typename key submission { __typename ...UiSubmissionFragment } options { __typename ...UiProgramRadioOption } }
fragment UiProgramRadioOption on UIProgramRadioOption { __typename key id is_selected is_selectable ui_lines { __typename ...UiLineFragment } cta_text project_code_selection_screen { __typename ...UiProjectCodeSelectionScreen } }
fragment UiProjectCodeSelectionScreen on UIProjectCodeSelectionScreen { __typename key screen_title ui_lines { __typename ...UiLineFragment } cta_text project_code { __typename ...UiTextboxFragment ...UiRadioGroupFragment } has_back_icon }
fragment UiRadioGroupFragment on UIRadioGroup { __typename key submission { __typename ...UiSubmissionFragment } submit_path options { __typename ...UiRadioOptionFragment } }
fragment UiRadioOptionFragment on UIRadioOption { __typename title { __typename ...UiAttributedStringFragment } id key is_selected }
fragment UiRowWithLinkFragment on UIRowWithLink { __typename cta ui_lines { __typename ...UiLineFragment } target }
fragment UiSectionFragment on UISection { __typename key id title description { __typename ...UiAttributedStringFragment } blocks { __typename ...UiBlockFragment } }
fragment UiSelectedAllowance on UISelectedAllowance { __typename key ui_lines { __typename ...UiLineFragment } cta_text allowance_selection_screen { __typename ...UiAllowanceSelectionScreen } }
fragment UiSelectedPaymentMethodCreditFragment on UISelectedPaymentMethodCredit { __typename key ui_lines { __typename ...UiLineFragment } icon { __typename ...UiImageFragment } }
fragment UiSelectedPaymentMethodFragment on UISelectedPaymentMethod { __typename ui_lines { __typename ...UiLineFragment } icon { __typename ...UiImageFragment } cta selected_option { __typename ...UiPaymentTokenOptionFragment } methods_screen { __typename ...UiChangePaymentMethodScreenFragment } }
fragment UiSpanIconFields on UISpanIcon { __typename span_icon { __typename name size color { __typename ...ColorFragment } } }
fragment UiSubmissionFragment on UISubmission { __typename field_name submitted_with }
fragment UiTextboxFragment on UITextbox { __typename default placeholder required submission { __typename ...UiSubmissionFragment } invalid_state { __typename ...UiCheckboxInvalidStateFragment } }
fragment UiToggleFragment on UIToggle { __typename is_selected is_selectable ui_lines { __typename ...UiLineFragment } event_tracking { __typename ...UiEventTrackingFragment } }
fragment UiUndoWindowBlock on UIUndoWindowBlock { __typename key icon_image: icon { __typename ...UiLineFragment } text { __typename ...UiLineFragment } background_color { __typename ...ColorFragment } warning { __typename ...UiUndoWindowBlockWarning } }
fragment UiUndoWindowBlockWarning on UIUndoWindowBlockWarning { __typename key icon { __typename ...UiLineFragment } text { __typename ...UiLineFragment } background_color { __typename ...ColorFragment } }
fragment UiUndoWindowOrderItem on UIUndoWindowOrderItem { __typename key name { __typename ...UiLineFragment } quantity { __typename ...UiLineFragment } }
fragment UiUndoWindowOrderItemBlock on UIUndoWindowOrderItemBlock { __typename key icon_image: icon { __typename ...UiLineFragment } text { __typename ...UiLineFragment } order_items { __typename ...UiUndoWindowOrderItem } background_color { __typename ...ColorFragment } }
fragment UiUndoWindowPaymentBlock on UIUndoWindowPaymentBlock { __typename key payment_methods { __typename ...UiUndoWindowPaymentMethod } background_color { __typename ...ColorFragment } }
fragment UiUndoWindowPaymentMethod on UIUndoWindowPaymentMethod { __typename key amount { __typename ...UiLineFragment } name { __typename ...UiLineFragment } icon { __typename ...UiImageFragment } }
fragment UiUnusableVouchersFragment on UIUnusableVouchers { __typename key ui_lines { __typename ...UiLineFragment } cta vouchers_screen { __typename ...UiVouchersScreenFragment } }
fragment UiVoucherScreenBlockFragment on UIVoucherScreenBlock { __typename ... on UIContentRow { ...UiContentRowFragment } ... on UIRowWithLink { ...UiRowWithLinkFragment } }
fragment UiVoucherSectionFragment on UIVoucherSection { __typename ui_lines { __typename ...UiLineFragment } blocks { __typename ...UiVoucherScreenBlockFragment } }
fragment UiVouchersFragment on UIVouchers { __typename key add_voucher { __typename ...UIAddVoucherFragment } content { __typename ...UiContentRowFragment } }
fragment UiVouchersScreenFragment on UIVouchersScreen { __typename title sections { __typename ...UiVoucherSectionFragment } }